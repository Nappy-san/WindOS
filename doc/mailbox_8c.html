<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>WindOS: /home/lucas/Projets/WindOS/src/mailbox.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WindOS
   </div>
   <div id="projectbrief">WindOS is a bare-metal operating system for Raspberry Pi.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mailbox_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mailbox.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains the wrappers to use the mailbox The mailbox is the system to be able to connect the processor to the VideoCore (VC), in order to use the GPU, manipulate the peripherals... The mailbox works with a FIFO to send to a certain place in the RAM The FIFO contains multiple tags, wich represent actions for the VC. We use only one tag per call, to simplify the implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;mailbox.h&quot;</code><br />
<code>#include &quot;<a class="el" href="arm_8h_source.html">arm.h</a>&quot;</code><br />
<code>#include &quot;timer.h&quot;</code><br />
<code>#include &quot;string.h&quot;</code><br />
<code>#include &quot;kernel.h&quot;</code><br />
<code>#include &quot;stdint.h&quot;</code><br />
<code>#include &quot;debug.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mailbox.c:</div>
<div class="dyncontent">
<div class="center"><img src="mailbox_8c__incl.png" border="0" usemap="#_2home_2lucas_2_projets_2_wind_o_s_2src_2mailbox_8c" alt=""/></div>
<map name="_2home_2lucas_2_projets_2_wind_o_s_2src_2mailbox_8c" id="_2home_2lucas_2_projets_2_wind_o_s_2src_2mailbox_8c">
<area shape="rect" id="node2" href="mailbox_8h_source.html" title="mailbox.h" alt="" coords="604,169,682,196"/>
<area shape="rect" id="node5" href="arm_8h.html" title="ARM specifically related code. " alt="" coords="706,169,761,196"/>
<area shape="rect" id="node6" href="timer_8h_source.html" title="timer.h" alt="" coords="785,169,848,196"/>
<area shape="rect" id="node8" href="kernel_8h_source.html" title="kernel.h" alt="" coords="854,244,922,271"/>
<area shape="rect" id="node10" href="debug_8h_source.html" title="debug.h" alt="" coords="385,95,453,121"/>
<area shape="rect" id="node12" href="cstubs_8h_source.html" title="cstubs.h" alt="" coords="275,169,347,196"/>
<area shape="rect" id="node14" href="memalloc_8h_source.html" title="memalloc.h" alt="" coords="121,244,210,271"/>
<area shape="rect" id="node15" href="mmu_8h_source.html" title="mmu.h" alt="" coords="201,319,264,345"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structprop_tag_m_a_c_address.html">propTagMACAddress</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The property tag for getting the mac address.  <a href="structprop_tag_m_a_c_address.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structprop_tag_power_state.html">propTagPowerState</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The property tag for setting power state for devices.  <a href="structprop_tag_power_state.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8feda7c2362b7d18261b48e537060b51"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8feda7c2362b7d18261b48e537060b51"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MBX_BASE</b>&#160;&#160;&#160;(PERIPHERALS_BASE + 0xB880)</td></tr>
<tr class="separator:a8feda7c2362b7d18261b48e537060b51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8965858c5f1ebd702d639f28af6590ae"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8965858c5f1ebd702d639f28af6590ae"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MBX0_STATUS</b>&#160;&#160;&#160;(MBX_BASE + 0x18)</td></tr>
<tr class="separator:a8965858c5f1ebd702d639f28af6590ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8d9873d84f034e5bc793fa711a7a5e7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab8d9873d84f034e5bc793fa711a7a5e7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MBX0_READ</b>&#160;&#160;&#160;(MBX_BASE + 0x00)</td></tr>
<tr class="separator:ab8d9873d84f034e5bc793fa711a7a5e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac55ebbde90bfdd46637d8a820906244f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac55ebbde90bfdd46637d8a820906244f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MBX1_WRITE</b>&#160;&#160;&#160;(MBX_BASE + 0x20)</td></tr>
<tr class="separator:ac55ebbde90bfdd46637d8a820906244f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7f635d3f52a2d0428ef77c57bb1c24a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad7f635d3f52a2d0428ef77c57bb1c24a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MBX1_STATUS</b>&#160;&#160;&#160;(MBX_BASE + 0x38)</td></tr>
<tr class="separator:ad7f635d3f52a2d0428ef77c57bb1c24a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a564c8bebd0758d1cc4e7cc713a111cda"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a564c8bebd0758d1cc4e7cc713a111cda"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MBX_STATUS_EMPTY</b>&#160;&#160;&#160;0x40000000</td></tr>
<tr class="separator:a564c8bebd0758d1cc4e7cc713a111cda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6d9c4620c3a7e82d410341d3adb56ed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa6d9c4620c3a7e82d410341d3adb56ed"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MBX_STATUS_FULL</b>&#160;&#160;&#160;0x80000000</td></tr>
<tr class="separator:aa6d9c4620c3a7e82d410341d3adb56ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac72f705dd9af46db2e888e773f0faa6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aac72f705dd9af46db2e888e773f0faa6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PROPTAG_GET_MAC_ADDRESS</b>&#160;&#160;&#160;0x00010003</td></tr>
<tr class="separator:aac72f705dd9af46db2e888e773f0faa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0597c5d51739a5df599325dff454cb3d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0597c5d51739a5df599325dff454cb3d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DEVICE_ID_SD_CARD</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a0597c5d51739a5df599325dff454cb3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa44cbd0f197ef5e93bb4d9b5f33cef02"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa44cbd0f197ef5e93bb4d9b5f33cef02"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DEVICE_ID_USB_HCD</b>&#160;&#160;&#160;3</td></tr>
<tr class="separator:aa44cbd0f197ef5e93bb4d9b5f33cef02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add076465017c540d5c4258a42c6e22d2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="add076465017c540d5c4258a42c6e22d2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>POWER_STATE_OFF</b>&#160;&#160;&#160;(0 &lt;&lt; 0)</td></tr>
<tr class="separator:add076465017c540d5c4258a42c6e22d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade3287e8c82db0189ff7d608490adb38"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ade3287e8c82db0189ff7d608490adb38"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>POWER_STATE_ON</b>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr class="separator:ade3287e8c82db0189ff7d608490adb38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee4e873f25793484d0a5dd92f5cc7f6c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aee4e873f25793484d0a5dd92f5cc7f6c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>POWER_STATE_WAIT</b>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr class="separator:aee4e873f25793484d0a5dd92f5cc7f6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35d912cc5184d2f7061a3a71a22490db"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a35d912cc5184d2f7061a3a71a22490db"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>POWER_STATE_NO_DEVICE</b>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr class="separator:a35d912cc5184d2f7061a3a71a22490db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f4f37f3375a9c45ce74d60b562a1296"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7f4f37f3375a9c45ce74d60b562a1296"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PROPTAG_SET_POWER_STATE</b>&#160;&#160;&#160;0x00028001</td></tr>
<tr class="separator:a7f4f37f3375a9c45ce74d60b562a1296"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aab4f42519d377ec1e42b5f7f61ca51f9"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structprop_tag_m_a_c_address.html">propTagMACAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mailbox_8c.html#aab4f42519d377ec1e42b5f7f61ca51f9">propTagMACAddress</a></td></tr>
<tr class="memdesc:aab4f42519d377ec1e42b5f7f61ca51f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The property tag for getting the mac address.  <a href="#aab4f42519d377ec1e42b5f7f61ca51f9">More...</a><br /></td></tr>
<tr class="separator:aab4f42519d377ec1e42b5f7f61ca51f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ae112fdd17b7147877f0893bfc3b480"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structprop_tag_power_state.html">propTagPowerState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mailbox_8c.html#a8ae112fdd17b7147877f0893bfc3b480">propTagPowerState</a></td></tr>
<tr class="memdesc:a8ae112fdd17b7147877f0893bfc3b480"><td class="mdescLeft">&#160;</td><td class="mdescRight">The property tag for setting power state for devices.  <a href="#a8ae112fdd17b7147877f0893bfc3b480">More...</a><br /></td></tr>
<tr class="separator:a8ae112fdd17b7147877f0893bfc3b480"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa2442203f83dfabc1bd4dfc7a4e99ca4"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mailbox_8c.html#aa2442203f83dfabc1bd4dfc7a4e99ca4">mbxWriteRead</a> (uint32_t channel, uint32_t data)</td></tr>
<tr class="memdesc:aa2442203f83dfabc1bd4dfc7a4e99ca4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data to the mailbox, and retrieve the response.  <a href="#aa2442203f83dfabc1bd4dfc7a4e99ca4">More...</a><br /></td></tr>
<tr class="separator:aa2442203f83dfabc1bd4dfc7a4e99ca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa61cb150e3db67f8a7afd8734f8669c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mailbox_8c.html#aa61cb150e3db67f8a7afd8734f8669c7">mbxFlush</a> ()</td></tr>
<tr class="memdesc:aa61cb150e3db67f8a7afd8734f8669c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">flush the mailbox (to wait for space to write data)  <a href="#aa61cb150e3db67f8a7afd8734f8669c7">More...</a><br /></td></tr>
<tr class="separator:aa61cb150e3db67f8a7afd8734f8669c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b02a754805ba1ac4806c4b8e1f69772"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mailbox_8c.html#a1b02a754805ba1ac4806c4b8e1f69772">mbxRead</a> (uint32_t channel)</td></tr>
<tr class="memdesc:a1b02a754805ba1ac4806c4b8e1f69772"><td class="mdescLeft">&#160;</td><td class="mdescRight">read from the mailbox, to a certain channel  <a href="#a1b02a754805ba1ac4806c4b8e1f69772">More...</a><br /></td></tr>
<tr class="separator:a1b02a754805ba1ac4806c4b8e1f69772"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11bfb36bd060799ee6dc348c8049c3dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mailbox_8c.html#a11bfb36bd060799ee6dc348c8049c3dc">mbxWrite</a> (uint32_t channel, uint32_t data)</td></tr>
<tr class="memdesc:a11bfb36bd060799ee6dc348c8049c3dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to the mailbox on a certain channel.  <a href="#a11bfb36bd060799ee6dc348c8049c3dc">More...</a><br /></td></tr>
<tr class="separator:a11bfb36bd060799ee6dc348c8049c3dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa66e21a90fff8fe560d5c314fab1c59e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mailbox_8c.html#aa66e21a90fff8fe560d5c314fab1c59e">mbxGetTag</a> (uint32_t channel, uint32_t tagID, void *tag, uint32_t tagSize, uint32_t requestParamSize)</td></tr>
<tr class="memdesc:aa66e21a90fff8fe560d5c314fab1c59e"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a Tag to the mailbox, and retrieve the response  <a href="#aa66e21a90fff8fe560d5c314fab1c59e">More...</a><br /></td></tr>
<tr class="separator:aa66e21a90fff8fe560d5c314fab1c59e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c2bb4532d331e12dc36fecf2197363a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mailbox_8c.html#a4c2bb4532d331e12dc36fecf2197363a">mbxGetMACAddress</a> (uint8_t buffer[6])</td></tr>
<tr class="memdesc:a4c2bb4532d331e12dc36fecf2197363a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the mac address from the mailbox.  <a href="#a4c2bb4532d331e12dc36fecf2197363a">More...</a><br /></td></tr>
<tr class="separator:a4c2bb4532d331e12dc36fecf2197363a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20741e939131b1d19a83c802514bc5c4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mailbox_8c.html#a20741e939131b1d19a83c802514bc5c4">mbxSetPowerStateOn</a> (uint32_t deviceID)</td></tr>
<tr class="memdesc:a20741e939131b1d19a83c802514bc5c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set power state on on a device.  <a href="#a20741e939131b1d19a83c802514bc5c4">More...</a><br /></td></tr>
<tr class="separator:a20741e939131b1d19a83c802514bc5c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c5a7d4d279b47171ee35c9bd4152b35"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mailbox_8c.html#a3c5a7d4d279b47171ee35c9bd4152b35">mbxSetPowerStateOff</a> (uint32_t deviceID)</td></tr>
<tr class="memdesc:a3c5a7d4d279b47171ee35c9bd4152b35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set power state off on a device.  <a href="#a3c5a7d4d279b47171ee35c9bd4152b35">More...</a><br /></td></tr>
<tr class="separator:a3c5a7d4d279b47171ee35c9bd4152b35"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains the wrappers to use the mailbox The mailbox is the system to be able to connect the processor to the VideoCore (VC), in order to use the GPU, manipulate the peripherals... The mailbox works with a FIFO to send to a certain place in the RAM The FIFO contains multiple tags, wich represent actions for the VC. We use only one tag per call, to simplify the implementation. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="aab4f42519d377ec1e42b5f7f61ca51f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structprop_tag_m_a_c_address.html">propTagMACAddress</a>  <a class="el" href="structprop_tag_m_a_c_address.html">propTagMACAddress</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The property tag for getting the mac address. </p>
<p><a class="el" href="structprop_tag_m_a_c_address.html" title="The property tag for getting the mac address. ">propTagMACAddress</a> </p>

</div>
</div>
<a class="anchor" id="a8ae112fdd17b7147877f0893bfc3b480"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structprop_tag_power_state.html">propTagPowerState</a>  <a class="el" href="structprop_tag_power_state.html">propTagPowerState</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The property tag for setting power state for devices. </p>
<p><a class="el" href="structprop_tag_power_state.html" title="The property tag for setting power state for devices. ">propTagPowerState</a> </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aa61cb150e3db67f8a7afd8734f8669c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mbxFlush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>flush the mailbox (to wait for space to write data) </p>
<p>Wait for the mailbox to be empty </p>

</div>
</div>
<a class="anchor" id="a4c2bb4532d331e12dc36fecf2197363a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbxGetMACAddress </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>buffer</em>[6]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the mac address from the mailbox. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The buffer to put the address to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MBX_SUCCESS or MBX_FAILURE </dd></dl>

</div>
</div>
<a class="anchor" id="aa66e21a90fff8fe560d5c314fab1c59e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mbxGetTag </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tagID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tagSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>requestParamSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send a Tag to the mailbox, and retrieve the response </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The channel to write to </td></tr>
    <tr><td class="paramname">tagID</td><td>the ID of the tag to send </td></tr>
    <tr><td class="paramname">tag</td><td>The tag to send </td></tr>
    <tr><td class="paramname">tagSize</td><td>The size of the tag </td></tr>
    <tr><td class="paramname">requestParamSize</td><td>The size of the tag requests </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the message has been send and recieved, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a1b02a754805ba1ac4806c4b8e1f69772"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t mbxRead </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read from the mailbox, to a certain channel </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The channel to read from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The return value </dd></dl>

</div>
</div>
<a class="anchor" id="a3c5a7d4d279b47171ee35c9bd4152b35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbxSetPowerStateOff </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>deviceID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set power state off on a device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceID</td><td>The id of the device </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MBX_SUCCESS or MBX_FAILURE </dd></dl>

</div>
</div>
<a class="anchor" id="a20741e939131b1d19a83c802514bc5c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbxSetPowerStateOn </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>deviceID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set power state on on a device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceID</td><td>The id of the device </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MBX_SUCCESS or MBX_FAILURE </dd></dl>

</div>
</div>
<a class="anchor" id="a11bfb36bd060799ee6dc348c8049c3dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mbxWrite </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write to the mailbox on a certain channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The channel to write to  data The data to write to the channel </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa2442203f83dfabc1bd4dfc7a4e99ca4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t mbxWriteRead </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send data to the mailbox, and retrieve the response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The channel to send the data </td></tr>
    <tr><td class="paramname">data</td><td>The data to send (a pointer to the data actually) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of the message </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="mailbox_8c.html">mailbox.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
